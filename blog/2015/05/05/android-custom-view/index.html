
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Android Custom View - Solarex's Blog</title>
  <meta name="author" content="Solarex">

  
  <meta name="description" content="Subclass View onMeasure MeasureSpec
setMeasureDimension onLayout layout(left, top, right, bottom) onDraw Canvas While viewgroups dont generally draw &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Solarex.github.io/blog/2015/05/05/android-custom-view">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Solarex's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  -->
  <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.useso.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.useso.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Solarex's Blog</a></h1>
  
    <h2>Yet Another Blog 4 Solarex</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:Solarex.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li><a href="/projects">Projects</a></li>
	<li><a href="https://solarex.github.io/wiki">Wiki</a></li>
    <li><a href="/about">About</a></li>
	<li><a href="https://solarex.github.io/resume">Resume</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Android Custom View</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-05T11:45:00+08:00" pubdate data-updated="true">May 5<span>th</span>, 2015</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><center><img src="/images/android_training.jpg"/></center></p>




<!-- more -->


<p></p>

<p><center><iframe width="560" height="315" src="https://www.youtube.com/embed/NYtB6mlu7vA" frameborder="0" allowfullscreen></iframe></center></p>


<h3>Subclass View</h3>

<ul>
<li>onMeasure

<ul>
<li>MeasureSpec</li>
<li>setMeasureDimension</li>
</ul>
</li>
<li>onLayout

<ul>
<li>layout(left, top, right, bottom)</li>
</ul>
</li>
<li>onDraw

<ul>
<li>Canvas</li>
</ul>
</li>
</ul>


<p>While viewgroups dont generally draw any content of their own,there are many situations where this could be useful,there are help instances where we can ask viewgroup to do some drawing.The first is inside the method <code>dispatchDraw()</code> after <code>super.dispatchDraw</code> has been called,at this stage,child views have already been drawn and we have an opportunity to do additional drawing on top.The second is using the same <code>onDraw()</code> callback as in <code>view</code>.Anything we draw here will be drawn before the child view and thus will show us underneath them,this can be helpful for drawing any type of dynamic backgrounds or selector states if you wish to put code into the <code>onDraw</code> of a ViewGroup.Dont forget to enable drawing callbacks of ViewGroup by <code>setWillNotDraw(false)</code>,otherwise ViewGroup&rsquo;s <code>onDraw</code> callback will never be triggered,this is because ViewGroup by default has its <code>onDraw</code> callback disabled.</p>

<h3>Applying Custom Attributes</h3>

<h3>LayoutParams</h3>

<ul>
<li><code>checkLayoutParams(ViewGroup.LayoutParams)</code></li>
<li><code>generateLayoutParams(ViewGroup.LayoutParams)</code></li>
<li><code>generateLayoutParams(AttributeSet)</code></li>
<li><code>generateDefaultLayoutParams()</code></li>
</ul>


<h3>Handling Layout Events</h3>

<ul>
<li><code>onSizeChanged</code></li>
</ul>


<h3>Making the view interactive</h3>

<h4>Handling Input Gestures</h4>

<h3>Use hardware acceleration</h3>

<p>You can control hardware acceleration at the following levels:</p>

<ul>
<li><code>Application level</code>,<code>&lt;application android:hardwareAccelerated="true" ...&gt;</code></li>
<li><code>Activity level</code>,<code>&lt;activity android:hardwareAccelerated="false" /&gt;</code></li>
<li><code>Window level</code>,<code>getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);</code></li>
<li><code>View level</code>,<code>myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);</code></li>
</ul>


<p>If you must check whether your view is hardware acclerated in your drawing code,use <code>Canvas.isHardwareAccelerated()</code> instead of <code>View.isHardwareAccelerated()</code> when possible. When a view is attached to a hardware accelerated window, it can still be drawn using a non-hardware accelerated <code>Canvas</code>. This happens, for instance, when drawing a view into a bitmap for caching purposes.</p>
</div>
<div class="entry-content">
<center><img src="/images/by.png" />除非另有声明，本网站采用<a href="http://creativecommons.org/licenses/by/3.0/cn/" rel="license">知识共享“署名 3.0 中国大陆”许可协议</a>授权。</center>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Solarex</span></span>

      








  


<time datetime="2015-05-05T11:45:00+08:00" pubdate data-updated="true">May 5<span>th</span>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/dev/'>dev</a>
  
</span>


    </p>
    
      <div class="sharing">
    <!-- JiaThis Button BEGIN -->
    <div class="jiathis_style_32x32">
        <a class="jiathis_button_tsina"></a>
        <a class="jiathis_button_weixin"></a>
        <a class="jiathis_button_douban"></a>
        <a class="jiathis_button_fanfou"></a>
        <a class="jiathis_button_evernote"></a>
        <a class="jiathis_button_delicious"></a>
        <a class="jiathis_button_renren"></a>
        <a class="jiathis_button_tqq"></a>
        <a class="jiathis_button_qzone"></a>
        <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
        <a class="jiathis_counter_style"></a>
    </div>
    <script type="text/javascript" >
        var jiathis_config={
summary:"",
        hideMore:false
        }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
  </div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/03/29/python-tutorial/" title="Previous Post: Python Tutorial">&laquo; Python Tutorial</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/05/05/mac-dev-setup/" title="Next Post: Setup Mac Development Environment">Setup Mac Development Environment &raquo;</a>
      
    </p>
  </footer>
</article>


<section id="comment">
<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"solarex"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
</section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/03/14/mobile-apps-offline-support/">Mobile Apps Offline Support</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/13/the-clean-architecture/">The Clean Architecture</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/25/android-handler-memory-leaks/">Android Handler Memory Leaks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/12/recyclerview-animation-part-ii/">RecyclerView Animation part II</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/11/recyclerview-animation-part-i/">RecyclerView Animation part I</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Solarex -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>


<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F2574e8b2c205dfe8ff89e239fa38ca27' type='text/javascript'%3E%3C/script%3E"));
</script>


</footer>
  














</body>
</html>
