
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Android Custom View - Solarex's Blog</title>
    <meta name="author" content="Solarex">
    
	<meta name="description" content="Subclass View onMeasure MeasureSpec
setMeasureDimension onLayout layout(left, top, right, bottom) onDraw Canvas While viewgroups dont generally draw &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Solarex's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <script src="/javascripts/ajaxify.js"></script>
   
    <script>
var _hmt = _hmt || [];
(function() {
      var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?2574e8b2c205dfe8ff89e239fa38ca27";
          var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
})();
</script>


    
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42746457-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        Solarex
    </div>
</h1>
<br>

<ul id="social-links" style="text-align:center">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/flyfire" class="github" title="Github"></a>
  </li>
  
  
  <!-- Google Plus -->
  <li>
  <a href="http://plus.google.com/107384356964511479070?rel=author" class="google" title="Google+"></a>
  </li>
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/hrhflyfire" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/blog/archives/index.html">Archives</a></li>
    <li><a href="http://solarex.github.io/wiki">Wiki</a></li>
    <li id="ajax"><a href="/projects">Project</a></li>
    <li><a href="http://solarex.github.io/resume">Resume</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="http://google.com/search" id="search">
            <input type="hidden" name="q" value="site:solarex.github.io">
            <input name="q" type="text" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload --> 
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">Android Custom View</h2>
	<div class="entry-content"><p><center><img src="/images/android_training.jpg"/></center></p>




<!-- more -->


<p></p>

<p><center><iframe width="560" height="315" src="https://www.youtube.com/embed/NYtB6mlu7vA" frameborder="0" allowfullscreen></iframe></center></p>


<h3>Subclass View</h3>

<ul>
<li>onMeasure

<ul>
<li>MeasureSpec</li>
<li>setMeasureDimension</li>
</ul>
</li>
<li>onLayout

<ul>
<li>layout(left, top, right, bottom)</li>
</ul>
</li>
<li>onDraw

<ul>
<li>Canvas</li>
</ul>
</li>
</ul>


<p>While viewgroups dont generally draw any content of their own,there are many situations where this could be useful,there are help instances where we can ask viewgroup to do some drawing.The first is inside the method <code>dispatchDraw()</code> after <code>super.dispatchDraw</code> has been called,at this stage,child views have already been drawn and we have an opportunity to do additional drawing on top.The second is using the same <code>onDraw()</code> callback as in <code>view</code>.Anything we draw here will be drawn before the child view and thus will show us underneath them,this can be helpful for drawing any type of dynamic backgrounds or selector states if you wish to put code into the <code>onDraw</code> of a ViewGroup.Dont forget to enable drawing callbacks of ViewGroup by <code>setWillNotDraw(false)</code>,otherwise ViewGroup&rsquo;s <code>onDraw</code> callback will never be triggered,this is because ViewGroup by default has its <code>onDraw</code> callback disabled.</p>

<h3>Applying Custom Attributes</h3>

<h3>LayoutParams</h3>

<ul>
<li><code>checkLayoutParams(ViewGroup.LayoutParams)</code></li>
<li><code>generateLayoutParams(ViewGroup.LayoutParams)</code></li>
<li><code>generateLayoutParams(AttributeSet)</code></li>
<li><code>generateDefaultLayoutParams()</code></li>
</ul>


<h3>Handling Layout Events</h3>

<ul>
<li><code>onSizeChanged</code></li>
</ul>


<h3>Making the view interactive</h3>

<h4>Handling Input Gestures</h4>

<h3>Use hardware acceleration</h3>

<p>You can control hardware acceleration at the following levels:</p>

<ul>
<li><code>Application level</code>,<code>&lt;application android:hardwareAccelerated="true" ...&gt;</code></li>
<li><code>Activity level</code>,<code>&lt;activity android:hardwareAccelerated="false" /&gt;</code></li>
<li><code>Window level</code>,<code>getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);</code></li>
<li><code>View level</code>,<code>myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);</code></li>
</ul>


<p>If you must check whether your view is hardware acclerated in your drawing code,use <code>Canvas.isHardwareAccelerated()</code> instead of <code>View.isHardwareAccelerated()</code> when possible. When a view is attached to a hardware accelerated window, it can still be drawn using a non-hardware accelerated <code>Canvas</code>. This happens, for instance, when drawing a view into a bitmap for caching purposes.</p>
</div>
    <div class="entry-content"><center>除非另有声明，本网站采用<a href="http://creativecommons.org/licenses/by/3.0/cn/" rel="license">知识共享“署名 3.0 中国大陆”许可协议</a>授权。</center></div>

<div class="meta">
	
		<span class="comments"><a href="/blog/2015/05/05/android-custom-view/#disqus_thread">Comments</a></span>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2017

    Solarex
. Powered by <a href="http://octopress.org">Octopress</a> | 
    Theme <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'flyfire';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://Solarex.github.io/blog/2015/05/05/android-custom-view/';
        var disqus_url = 'http://Solarex.github.io/blog/2015/05/05/android-custom-view/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
